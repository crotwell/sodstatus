<div class="eventList">
<h1>Events</h1>

<!--
{{world-map events=model }}
-->

<p>Need to center map based on events...</p>

{{#leaflet-map lat='34' lng='-81' zoom=7}}
  {{!-- Specify child layer components here --}}
  {{tile-layer url="http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"}}

  {{#each model as |e|}}
    {{#marker-layer lat=e.prefOrigin.latitude lng=e.prefOrigin.longitude }}
      {{#popup-layer}}
        <h3>Event: {{format-iso-date e.prefOrigin.time }} {{e.prefMagnitude.magFormatted}} {{e.prefMagnitude.magType}}</h3>
      {{/popup-layer}}
    {{/marker-layer}}
  {{/each}}
{{/leaflet-map}}

<table>
  <thead><th>Name</th><th>Time</th><th>Mag</th><th>Lat</th><th>Lon</th><th>Depth(km)</th><th>Status</th></thead>
  {{#each model as |e|}}
    <tr>
      <td>{{#link-to 'events.show.stations' e}}{{e.name}}{{/link-to}}</td>
      <td>{{format-iso-date e.prefOrigin.time }}</td>
      <td>{{e.prefMagnitude.magFormatted}} {{e.prefMagnitude.magType}}</td>
      <td>{{e.prefOrigin.latitudeFormatted}}</td>
      <td>{{e.prefOrigin.longitudeFormatted}}</td>
      <td>{{e.prefOrigin.depth}} km</td>
      <td>{{e.status}}</td>
    </tr>
  {{/each}}
</table>

</div>

{{outlet}}
